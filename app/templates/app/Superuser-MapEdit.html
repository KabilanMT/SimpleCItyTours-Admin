<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Admin - Map Edit</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
  <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
  <style>
    .input-group-addon {
      min-width: 105px;
      text-align: left;
    }
  </style>
</head>

<body>

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Simple City Tours</a>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Admin</a></li>
          <li><a href="#">Shop</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
          <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <ul class="list-group">
      <form>

        <li class="list-group-item">
          <div class="input-group">
            <span class="input-group-addon">Name</span>
            <input id="name" type="text" class="form-control" name="Name" placeholder="City's Name">
          </div>
        </li>
        <li class="list-group-item">
          <div class="input-group">
            <span class="input-group-addon">Description</span>
            <textarea id="description" type="text" class="form-control" name="Description" placeholder="City's Description"></textarea>
          </div>
        </li>

        <li class="list-group-item">
          <div class="input-group">
            <span class="input-group-addon">Admin User</span>
            <input id="adminUser" type="text" class="form-control pull-left" name="adminuser" disabled>
            <span class="input-group-btn">
            <div class="dropdown pull-right" id="adminDropdown">
              <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" id="dropdownButton">Click Here
            <span class="caret"></span></button>
            <ul class="dropdown-menu" id="adminDropdownList">
            </ul>
          </div>
          </span>
  </div>
  </li>

  <li class="list-group-item">
    <div class="input-group">
      <span class="input-group-addon">Price $</span>
      <input id="price" type="number" min="0.00" step="1" class="form-control" name="price" placeholder="3">
    </div>
  </li>

  <li class="list-group-item">
    <div class="input-group">
      <span class="input-group-addon">Visibility</span>
      <input type="text" class="form-control pull-left" disabled>
      <span class="input-group-btn">
              <input id="visibility" class="form-control" type="checkbox" checked data-toggle="toggle">
            </span>
    </div>
  </li>

  <li class="list-group-item">
    <div class="input-group">
      <span class="input-group-addon">Map Bounds</span>
      <input id="mapBounds" type="text" class="form-control pull-left" name="mapBounds" disabled>
      <span class="input-group-btn">
              <button type="button" class="btn btn-primary editBut" id="polyEdit"><span class="glyphicon glyphicon-edit"></span>Edit</button>
      </span>
    </div>
  </li>

  <li class="list-group-item">
    <div class="input-group">
      <span class="input-group-addon">Map Points</span>
      <input id="mapPoints" type="text" class="form-control pull-left" name="mapPoints" disabled>
      <span class="input-group-btn">
              <button type="button" class="btn btn-primary editBut" id="pointsEdit"><span class="glyphicon glyphicon-edit"></span>Edit</button>
      </span>
    </div>
  </li>
  </form>
  </ul>

  <div class="pull-right">
    <button type="button" class="btn btn-success" id="save">Save</button>
    <button type="button" class="btn btn-danger" id="cancel">Cancel</button>
  </div>
  </div>

  <script>
    var names = ["Jon", "Nick", "Bill", "Daquan"]; //Replace this with an array of admin users from the database
    // window.localStorage.clear();
    //Looks through array and populates dropdown with admin users
    for (var i = 0; i < names.length; i++) {

      var li = document.createElement("LI");
      var a = document.createElement("A");
      var text = document.createTextNode(names[i]);

      a.href = "#";
      a.appendChild(text);
      li.appendChild(a);
      document.getElementById("adminDropdownList").appendChild(li);
    }

    $(function() {

      if(localStorage["lists"]){
        var listvalues = localStorage.getItem('lists');
        //parse the value
        var finalvalue = JSON.parse(listvalues);
        console.log(localStorage);
        Object.keys(finalvalue).forEach(function(key) {

          console.log(key, finalvalue[key]);

        });
      }




      //replaces dropdown text dynamically
      $(".dropdown-menu li a").click(function() {
        $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
        $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
      });

      $('.dropdown-inverse li > a').click(function(e) {
        $('.btnStatus').text(this.innerHTML);
      });


      //Saves value
      $("#save").click(function() {
        alert(
          "Name: " + $('#name').val() +
          "\rDescription: " + $("#description").val() +
          "\rAdmin User: " + $('#dropdownButton').text() +
          "\rPrice: " + $("#price").val() +
          "\rVisibility: " + $("#visibility").val()
        );
        var listvalues = {
          "name": $('#name').val(),
          "description": $("#description").val(),
          "adminUser": $('#dropdownButton').text(),
          "price": $("#price").val(),
          "visibility": $("#visibility").val(),
          "mapPoints": ""
        }
        localStorage.setItem('lists', JSON.stringify(listvalues));
      });

      $('#polyEdit').click(function() {
        var listvalues = {
          "name": $('#name').val(),
          "description": $("#description").val(),
          "adminUser": $('#dropdownButton').text(),
          "price": $("#price").val(),
          "visibility": $("#visibility").val(),
          "mapPoints": ""
        }
        localStorage.setItem('lists', JSON.stringify(listvalues));
        window.location.href = 'Superuser-MapPolygon.html';
      });
    });


  </script>
</body>

</html>
